!function(t){"use strict";t(window),t(document),t("html");var e=t("body"),i=(T4Srequest.page_type,T4Sroutes.search_url),s=T4SThemeSP.cacheNameFirst,n=!!("ontouchstart"in window||window.DocumentTouch&&window.document instanceof DocumentTouch||window.navigator.maxTouchPoints||window.navigator.msMaxTouchPoints),r=function(){function s(e){this.container=e,this.$container=t(e),this.deferRequestBy=300,this.cachedResults={},this.$form=this.$container.find("[data-frm-search]"),this.form=this.$form[0],this.$input=this.$container.find("[data-input-search]"),this.input=this.$input[0],this.$results=this.$container.find("[data-results-search]"),this.results=this.$results[0],this.isOpen=!1,this.sectionID=this.$container.attr("data-sid")||"predictive-search",this.$title=this.$container.find("[data-title-search]"),this.title=this.$title[0],this.$viewall=this.$container.find("[data-viewAll-search]"),this.viewall=this.$viewall[0],this.$select=this.$container.find("[data-cat-search]>select"),this.select=this.$select[0],this.currentVal=this.$select.val()||"*",this.hasClassTerms=!1,this.searchUrlForm=this.$form.serialize(),this.setupEventListeners(),this.onClickKey()}return s.prototype=Object.assign({},s.prototype,{setupEventListeners:function(){this.form.addEventListener("submit",this.onFormSubmit.bind(this)),this.input.addEventListener("input",this.debounce(t=>{this.onChange(t)},this.deferRequestBy).bind(this)),this.input.addEventListener("focus",this.onFocus.bind(this)),this.select&&this.select.addEventListener("change",this.onChangeSelectCat.bind(this)),this.container.addEventListener("focusout",this.onFocusOut.bind(this)),this.container.addEventListener("keyup",this.onKeyup.bind(this)),this.container.addEventListener("keydown",this.onKeydown.bind(this))},debounce:function(t,e){let i;return(...s)=>{clearTimeout(i),i=setTimeout(()=>t.apply(this,s),e)}},getQuery:function(){var t=this.input.value.trim();if(this.select){var e=this.currentVal.trim();"*"!=e&&(t=`product_type:${e} AND ${t}`)}return t},onChange:function(){var t=this.getQuery();if(!t.length)return this.close(!0),void(this.hasClassTerms&&(this.form.classList.remove("has--search-terms"),this.hasClassTerms=!1));this.getSearchResults(t),this.hasClassTerms||(this.form.classList.add("has--search-terms"),this.hasClassTerms=!0)},onFormSubmit:function(t){this.getQuery().length&&!this.container.querySelector('[aria-selected="true"] a')||t.preventDefault()},onFocus:function(){const t=this.getQuery();t.length&&("true"===this.container.getAttribute("results")?this.open():this.getSearchResults(t))},onChangeSelectCat:function(){this.currentVal=this.$select.val();const t=this.getQuery();t.length&&this.getSearchResults(t)},onClickKey:function(){var e=this;e.$container.find("[data-listKey]").on("click","[data-key]",function(i){i.preventDefault();var s=t(this);n?e.$input.val(s.attr("data-key")):e.$input.val(s.attr("data-key")).focus(),e.input.dispatchEvent(new Event("input",{bubbles:!0}))}),e.$form.on("click","[data-clear-search]",function(t){t.preventDefault(),e.$input.val(""),e.input.dispatchEvent(new Event("input",{bubbles:!0}))}),e.$container.on("opendDrawer",function(i){n||t(this).one("transitionend webkitTransitionEnd oTransitionEnd",function(){e.$input.focus()})})},onFocusOut:function(){setTimeout(()=>{this.container.contains(document.activeElement)||this.close()})},onKeyup:function(t){switch(this.getQuery().length||this.close(!0),t.preventDefault(),t.code){case"ArrowUp":this.switchOption("up");break;case"ArrowDown":this.switchOption("down");break;case"Enter":this.selectOption()}},onKeydown:function(t){"ArrowUp"!==t.code&&"ArrowDown"!==t.code||t.preventDefault()},switchOption:function(t){if(!this.container.getAttribute("open"))return;const e="up"===t,i=this.results.querySelector('[aria-selected="true"]'),s=this.results.querySelectorAll("li");let n=this.results.querySelector("li");e&&!i||(!e&&i?n=i.nextElementSibling||s[0]:e&&(n=i.previousElementSibling||s[s.length-1]),n!==i&&(n.setAttribute("aria-selected",!0),i&&i.setAttribute("aria-selected",!1),this.setLiveRegionText(n.textContent),this.input.setAttribute("aria-activedescendant",n.id)))},selectOption:function(){const t=this.container.querySelector('[aria-selected="true"] a, [aria-selected="true"] button');t&&t.click()},getSearchResults:function(t){const e=t.replace(" ","-").toLowerCase();this.setLiveRegionLoadingState(),this.cachedResults[e]?this.renderSearchResults(this.cachedResults[e]):fetch(`${i}/?${this.searchUrlForm}${encodeURIComponent(t)}&section_id=${this.sectionID}`).then(t=>{if(!t.ok){var e=new Error(t.status);throw this.close(),e}return t.text()}).then(t=>{const i=(new DOMParser).parseFromString(t,"text/html").querySelector(`#shopify-section-${this.sectionID}`).innerHTML;this.cachedResults[e]=i,this.renderSearchResults(i)}).catch(t=>{throw this.close(),t})},setLiveRegionLoadingState:function(){this.$skeletonElement=this.statusElement||this.$container.find("[data-skeleton-search]"),this.$skeletonElement.show(),this.$results.hide(),this.$viewall.hide(),this.container.setAttribute("loading",!0)},renderSearchResults:function(t){var i=(new DOMParser).parseFromString(t,"text/html");this.title&&(this.title.innerHTML=i.querySelector("[data-title-search]").innerHTML),this.results&&(this.results.innerHTML=i.querySelector("[data-results-search]").innerHTML);try{this.viewall.innerHTML=i.querySelector("[data-viewAll-search]").innerHTML}catch(t){}e.trigger("currency:update"),this.container.setAttribute("results",!0),this.setLiveRegionResults(),this.open()},setLiveRegionResults:function(){this.$skeletonElement.hide(),this.$results.show(),this.$viewall.show(),this.$title.show(),this.container.removeAttribute("loading")},getResultsMaxHeight:function(){return this.resultsMaxHeight=window.innerHeight-document.querySelector(".t4s-section-header").getBoundingClientRect().bottom,this.resultsMaxHeight},open:function(){this.results.style.maxHeight=this.resultsMaxHeight||`${this.getResultsMaxHeight()}px`,this.container.setAttribute("open",!0),this.input.setAttribute("aria-expanded",!0),this.isOpen=!0},close:function(t=!1){t&&(this.input.value="",this.container.removeAttribute("results"));const e=this.container.querySelector('[aria-selected="true"]');e&&e.setAttribute("aria-selected",!1),this.input.setAttribute("aria-activedescendant",""),this.container.removeAttribute("open"),this.input.setAttribute("aria-expanded",!1),this.resultsMaxHeight=!1,this.results.removeAttribute("style"),this.isOpen=!1}}),s}();T4SThemeSP.predictiveSearchInt=function(){var e,i,n;function a(){t("[data-predictive-search]:not(is--inted)").each(function(){t(this).addClass("is--inted"),this.predictiveSearch=new r(this)})}function o(){t('[data-drawer-options*="#t4s-search-hidden"]').removeAttr("data-drawer-delay")}a(),e="timeSearchT4s"+s,i="dataSearchT4s"+s,n=isStorageSpSession&&sessionStorage.getItem(e)||0,(n=parseInt(n))>0&&n>=Date.now()?(T4SThemeSP.$appendComponent.after(sessionStorage.getItem(i)),o(),a()):T4SThemeSP.getToFetchSection("?section_id=search-hidden").then(t=>{"NVT_94"!=t&&(T4SThemeSP.$appendComponent.after(t),o(),a(),isStorageSpSession&&(n=Date.now()+24e6,sessionStorage.setItem(e,n),sessionStorage.setItem(i,t)))})}}(jQuery_T4NT),jQuery_T4NT(document).ready(function(t){T4SThemeSP.predictiveSearchInt()});